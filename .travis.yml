dist: trusty
language: python
python:
- '2.7'
install:
- pip install ansible==2.7.1 molecule==2.19.0 apache-libcloud pycrypto
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/credentials.json"
  global:
  - secure: v5TO2iMd26JhNW1gHbJIMPf3EsDdHUFK2ezaWLzAeWir8sPnhb1Rzvo6zhGYfP0B/aDbIRgzFRTOKYCHqeldJEwv8mtVIZpp3AuUwx/H3kQIKfoA9/6Je5A2YWyv+ik1dCedmtcZHv74OplkzFkQiphWoxnnDJ8E775zVY1dbnljB5xAL4+jSk52rw1VB1RRZ24JCnrH76aIhCZKxN+nQTMKwLHDznsaYQxEI5IIMr7ESVWu7NOQSMnOLHstf9tATKMAdVf8ep4DqCHDX+k/o1gKW0xN3owAto296nhHxvJocAEa2brHmfgKLF0SwcbSMRMa5Q8/2Xern8NNBAVYSLxnhy6cXiPvsTyv5ds9oz5Ufl3Wyrcy94zpPWE8gTgEWDPSgqKKAKIo5hbLBzFCLmGmSb+jAS8rZFlQ/LGzCa3WqWKalRcfWueuQoIHPKgOJUMva65BkwNk/xMoVHBnRl6PdviVNIAd06vwEGTGtVPdJgvj8wTJABpxtetH5L2g+nYVJzpe77vZTFgb3l0OqC3h7JvHjWGnyUHSi/Ml/NTlIU4le6Fs8xLaUt/Imfs4b42wq3jQWcho6Tch412ZnmDMnR9yBl44Pj822PMQjv6FZe2I/CGRItIf7MCzo0KEMnF4LeeYgOzrwYYHNsD7+wH5EhgPQ60oHdO68ZhtiUE=
  - secure: oItAOWQ6gDjUph2LL8R8eG93/YGM7JxLk9olL6KlK+/AsTEPYBOrvLxB4Aq/SxsGW7+7stztDcJ9u77m01UvIVvtZxB1hnJ9+LNi1A/4hNXdA0nqUr6eEsvb9ymwOASho785e31Y5zQ2zGolxERom5LZcczXBSrxMS+KBQ/1WG8rubVsPrPRharj6O3H2eGscUkKm6xtop/FqfvuAaBqLeZrKG4xbrO4irpgOQKfw+L/eGvcXlUrLjUXtEqIb6UKGuxIKyogb7m/lXz9FDNh/oQPUmYkS82kZzXjY6xkjHJBhKfSK5yvnBGLNQVc25he0xL3oSKvqfOym3ofClGUTYv5CoCpLklPQQTYSceLjXjyc66hbPSd2rDX7JDOpLYd3SuhwasO6Zk0rAwBWxHfLAcfzuc31l1Q1QMQs9F97Imm0GI3UjCMh9tvuQKYXfkmZNKpEybbTKR6Bj+7EoFpr1DerePZBxQHQOzONWn44OY3bpTtmf5p7TrXbBYE3VYDQ0MMrAxLoXgSogLMpSEAScRB66lmhHhZ6ctNaVFlYdEgDEnaoqeYfwvOVo4srRzh2NXrhtsJVTsXJAs23sr/ya4nFw4s9ki+xcNx+6w+CzuxIKOuURZs67gax56Tnod1gYwMUJr3ysKGQg6n9C1SFxpJ5oUxdPIGFYVAdaWnE/w=
  - secure: MoxUEY1TXNGPDREIzI/Ot2fFa2xXKLhN8bTh4f6K0GKVAW86HkgWoKW35SmBpZ7RXkcUeA+LimG1kX3IuKhisMtKrcBVm47YoBrMjjrXHqsFjgkcAsYWKnAXXARk9Cbyb4+yarWbytTj1z2wCc+ZkM67OB4hs1n+Gwf5MH506AEKMwL8FrkPLPhxbXSb9D+y9rU3rxrz4iZ+4Iv0eGKGFjWSVcKumcrlI/LT0cXhuILhz+FA+C3Ma7ZhSOWq4mXa2KtNdg79clA4bHDWoymR5+Ua8Ayi/AloAOxOVs/SBarpnBE/rU0VIBCNa1MvWHO51Zrfi01VTMhUeE3uronl/ViLXO3s5ggrmty1OAVdJfx7ijmB4x23IHgtgYIspq6Z0mMXnhWWohLWGFsTwHs9CHY1vatAe2DQlluN/6hF4oXmOi2qZ9AU32IY9Hy0ol3sLEb1FvtgYw04llvN/42IIChRpPXg8PpnR1LVO35qnyiFBj6DMVLJrMD5MX51n+BGgfPYa9MZoHICFXbLU1PXKSlDvNu/KAP2ofON+pHfMjqDKK+Mf6wcdeJZmLqJY10rk9zAeYfJ1KuoKCFQKWo/UlJDEmNp1GTw+/nPYXmu5BX4Sgh6o5UVplnn79ddA7faGYOrRfgyLR6xTJ3lIx8D1gPEMOJGzWFqLocJ/RiaDBs=
before_install:
- openssl aes-256-cbc -K $encrypted_6d8931a32705_key -iv $encrypted_6d8931a32705_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
- echo $GCE_CREDENTIALS_FILE
script:
- molecule create
- molecule converge
- molecule verify
after_script:
- molecule destroy
notifications:
  slack:
    secure: lpddadTURxmxlE3lwN72oqld471X2rZL2zEuuX4rjMbkKyOOUcJ+vreRXT1fHXntJfOQ1dtIUVrKm/ugRiFrPG9riI5d28K7Flm7vMsonkaj7Sp6Zk4rcQ0wuFRdYW43p7vbWtGPSCzNpdAShUiMSdT44KxqVFo1XHoxWPn3s/ywa0WARXC6wueqiUaRWBrHxuhoVKv03+pBF0VAgX5AXpdCNX8fVkb9Nfchy0eveT2Ye5LRgudaUHN697OVJTWRx83r+PQgYNR+jf6NDggPQRfcaGtaXdlfD8odSgEVtAhoRxDuyFThOMcawPARNUAVmAjYZ6p3RHLE842rcM3W+b33wdwpm6PiJ1JsCEqBA5ZhqjtD5Kq/k12YWAFZJkIMXsXZ5Y/jCaWAusrJA9dMh8sVRHItDEHm4lHrzcZWd7sNMFPe9O4Gw9Y0bA10sz9GnwDRPBo7M6f0Nieuyrkup+udLPTu73dMBk7C8Ko+dJujQnYqXWJyL969RmvPTK6v+6R+eiJEQGsohQkE4X7ovaS+9i3TCWprLKG0c8790DiphQrJJb1DEbYqLAkCX1InXutPTSXvAocVzNWn5Fm1VpJBX9qXLPmE+OZb/Pou8SDai4vEOrX12DVpZvLRMQvApXHdreuYo6vgksfy5wwm+QCEDNkUJuvx7mvEQspmvXE=
